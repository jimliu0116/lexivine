'use client'
import { useEffect, useState } from 'react'
export default function Admin(){ const [courses,setCourses]=useState<any[]>([]); const [title,setTitle]=useState(''); const [level,setLevel]=useState('A1'); const [difficulty,setDifficulty]=useState('Beginner'); const [isPremium,setIsPremium]=useState(false); useEffect(()=>{ load() },[]); async function load(){ const r=await fetch('/api/courses'); setCourses(await r.json()) } async function create(){ await fetch('/api/courses',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ title, level, difficulty, isPremium })}); setTitle(''); load() } return (<main className='max-w-5xl mx-auto px-4 py-8'><h1 className='text-2xl font-bold mb-4'>後台：課程與關卡</h1><div className='rounded-2xl border p-4 mb-6'><div className='font-semibold mb-2'>新增課程</div><div className='flex gap-2 flex-wrap items-center'><input value={title} onChange={e=>setTitle(e.target.value)} className='border rounded-xl px-3 py-2' placeholder='課程標題'/><select value={level} onChange={e=>setLevel(e.target.value)} className='border rounded-xl px-3 py-2'>{['A1','A2','B1','B2','C1','C2'].map(l=>(<option key={l}>{l}</option>))}</select><select value={difficulty} onChange={e=>setDifficulty(e.target.value)} className='border rounded-xl px-3 py-2'>{['Beginner','Intermediate','Advanced'].map(l=>(<option key={l}>{l}</option>))}</select><label className='flex items-center gap-1 text-sm'><input type='checkbox' checked={isPremium} onChange={e=>setIsPremium(e.target.checked)}/> Premium</label><button onClick={create} className='pill px-4 py-2 gbtn'>建立</button></div></div><div className='grid sm:grid-cols-2 gap-3'>{courses.map(c=>(<div key={c.id} className='rounded-2xl border p-4'><div className='font-medium'>{c.title} <span className='text-xs text-black/60'>({c.level} · {c.difficulty})</span></div><div className='text-xs text-black/60 mt-1'>{c.lessons.length} 課次 {c.isPremium? '· Premium':''}</div></div>))}</div></main>) }
